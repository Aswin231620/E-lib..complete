{
  "entities": {
    "Book": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Book",
      "type": "object",
      "description": "Represents a book in the e-library catalog.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Book entity."
        },
        "title": {
          "type": "string",
          "description": "The title of the book."
        },
        "author": {
          "type": "string",
          "description": "The author of the book."
        },
        "publicationYear": {
          "type": "number",
          "description": "The year the book was published."
        },
        "categoryId": {
          "type": "string",
          "description": "Reference to Category. (Relationship: Category 1:N Book)"
        },
        "description": {
          "type": "string",
          "description": "A short description or summary of the book."
        },
        "fileLocation": {
          "type": "string",
          "description": "The location of the book's digital file (e.g., URL or file path)."
        }
      },
      "required": [
        "id",
        "title",
        "author",
        "publicationYear",
        "categoryId",
        "description",
        "fileLocation"
      ]
    },
    "Category": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Category",
      "type": "object",
      "description": "Represents a category to which books can be assigned.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Category entity."
        },
        "name": {
          "type": "string",
          "description": "The name of the category (e.g., Science Fiction, History)."
        },
        "description": {
          "type": "string",
          "description": "A description of the category."
        }
      },
      "required": [
        "id",
        "name",
        "description"
      ]
    },
    "User": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User",
      "type": "object",
      "description": "Represents a user of the e-library system.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the User entity."
        },
        "username": {
          "type": "string",
          "description": "The user's username."
        },
        "email": {
          "type": "string",
          "description": "The user's email address.",
          "format": "email"
        },
        "registrationDate": {
          "type": "string",
          "description": "The date and time the user registered.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "username",
        "email",
        "registrationDate"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous",
      "google.com"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "User",
          "schema": {
            "$ref": "#/backend/entities/User"
          },
          "description": "Stores user profiles. User ID is obtained through Firebase Authentication.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier for the user."
            }
          ]
        }
      },
      {
        "path": "/categories/{categoryId}",
        "definition": {
          "entityName": "Category",
          "schema": {
            "$ref": "#/backend/entities/Category"
          },
          "description": "Stores book categories.",
          "params": [
            {
              "name": "categoryId",
              "description": "The unique identifier for the category."
            }
          ]
        }
      },
      {
        "path": "/books/{bookId}",
        "definition": {
          "entityName": "Book",
          "schema": {
            "$ref": "#/backend/entities/Book"
          },
          "description": "Stores book information. Book IDs are auto-generated by Firestore.",
          "params": [
            {
              "name": "bookId",
              "description": "The unique identifier for the book."
            }
          ]
        }
      }
    ],
    "reasoning": "The Firestore structure is designed to be simple and scalable for an e-library application, \"OpenShelf.\" It prioritizes ease of use for both users and administrators. The structure includes collections for `users`, `categories`, and `books`. Because the application has no collaborative features, Authorization Independence is less critical, and path-based ownership is sufficient.\n\nThe `/users/{userId}` collection stores user profiles. User IDs are obtained through Firebase Authentication.\n\nThe `/categories/{categoryId}` collection stores book categories. Each document contains a `name` and `description`. There is no particular authorization context required for categories.\n\nThe `/books/{bookId}` collection stores book information. It uses the top level collection. Book IDs are auto-generated by Firestore, or provided by the uploader.\n\nThis simple structure supports the application's core features, including browsing, searching, user authentication, and content management."
  }
}
